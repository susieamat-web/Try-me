<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rabbit Worlds</title>
<style>
body{
    margin:0;
    background:#5cc6ff;
    overflow:hidden;
    font-family:Arial, sans-serif;
}
canvas{ display:block; margin:0 auto; background:#87CEEB; }
#ui{
    position:absolute;
    top:10px;
    left:50%;
    transform:translateX(-50%);
    color:white;
    font-weight:bold;
}
</style>
</head>
<body>
<div id="ui">Score: <span id="score">0</span> | Highscore: <span id="high">0</span> | Wereld: <span id="world">1</span></div>
<canvas id="game" width="960" height="540"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const gravity = 0.7;
let keys = {};
let world = 1;
let score = 0;
let highscore = localStorage.getItem("rabbit_high") || 0;
document.getElementById("high").innerText = highscore;

let cameraX = 0;

class Player{
    constructor(){
        this.x=100;
        this.y=300;
        this.w=40;
        this.h=50;
        this.vx=0;
        this.vy=0;
        this.onGround=false;
        this.cooldown=0;
    }
    update(){
        if(keys["ArrowLeft"]) this.vx=-5;
        else if(keys["ArrowRight"]) this.vx=5;
        else this.vx=0;

        if(keys["ArrowUp"] && this.onGround){
            this.vy=-15;
            this.onGround=false;
        }

        this.vy+=gravity;
        this.x+=this.vx;
        this.y+=this.vy;

        if(this.y+this.h>=400){
            this.y=400-this.h;
            this.vy=0;
            this.onGround=true;
        }

        if(keys[" "] && this.cooldown<=0){
            bullets.push(new Bullet(this.x+this.w,this.y+20));
            this.cooldown=20;
        }
        if(this.cooldown>0) this.cooldown--;

        cameraX = this.x-200;
    }
    draw(){
        ctx.fillStyle="white";
        ctx.fillRect(this.x-cameraX,this.y,this.w,this.h);
    }
}

class Enemy{
    constructor(x){
        this.x=x;
        this.y=350;
        this.w=40;
        this.h=50;
        this.vx=-2-world;
    }
    update(){
        this.x+=this.vx;
    }
    draw(){
        ctx.fillStyle="red";
        ctx.fillRect(this.x-cameraX,this.y,this.w,this.h);
    }
}

class Bullet{
    constructor(x,y){
        this.x=x;
        this.y=y;
        this.w=10;
        this.h=5;
        this.vx=10;
    }
    update(){
        this.x+=this.vx;
    }
    draw(){
        ctx.fillStyle="yellow";
        ctx.fillRect(this.x-cameraX,this.y,this.w,this.h);
    }
}

class Boss{
    constructor(){
        this.x=2500;
        this.y=300;
        this.w=120;
        this.h=150;
        this.hp=10+world*5;
    }
    update(){
        if(this.x-player.x>100) this.x-=2;
    }
    draw(){
        ctx.fillStyle="purple";
        ctx.fillRect(this.x-cameraX,this.y,this.w,this.h);
    }
}

let player = new Player();
let enemies=[];
let bullets=[];
let boss=null
